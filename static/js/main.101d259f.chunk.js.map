{"version":3,"sources":["utils/api.js","utils/utils.js","utils/auth.js","contexts/CurrentUserContext.js","components/ProtectedRoute.js","components/IdentityForm.js","components/Register.js","components/Login.js","images/logo.svg","components/Header.js","components/Card.js","images/edit-button_big.svg","components/Main.js","components/ImagePopup.js","images/success-icon.svg","images/fail-icon.svg","components/InfoTooltip.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Footer.js","components/App.js","index.js"],"names":["api","cardsUrl","userUrl","headers","this","_cardsUrl","_userUrl","_headers","_authorization","authorization","res","ok","json","Promise","reject","status","fetch","then","_checkResponse","name","about","method","body","JSON","stringify","newAvatarUrl","avatar","newCardName","newCardUrl","link","isLiked","cardId","auth","baseUrl","email","password","token","CurrentUserContext","React","createContext","ProtectedRoute","Component","component","props","loggedIn","to","IdentityForm","title","buttonText","onFormSubmit","children","useState","emailInput","setEmailInput","passwordInput","setPasswordInput","className","onSubmit","evt","preventDefault","type","value","onChange","target","placeholder","minLength","maxLength","autoComplete","required","Register","onRegister","Login","onLogin","Header","onSignOut","pathname","useLocation","src","logo","alt","onClick","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","aria-label","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","id","avatarEditIcon","map","ImagePopup","onClose","InfoTooltip","isOpen","regStatusError","InfoTooltipIcon","failIcon","successIcon","InfoTooltipTitle","PopupWithForm","checkOpen","noValidate","EditProfilePopup","onUpdateUser","setName","description","setDescription","useEffect","e","EditAvatarPopup","onUpdateAvatar","inputRef","useRef","current","ref","AddPlacePopup","setNewCardName","setNewCardUrl","Footer","Date","getFullYear","App","setLoggedIn","setEmail","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setRegStatusError","selectedCard","setSelectedCard","setCurrentUser","setCards","history","useHistory","closeAllPopups","currentToken","localStorage","getItem","tokenCheck","data","push","catch","err","console","log","getUserInfo","getCardList","handleEscClose","key","document","addEventListener","removeEventListener","Provider","removeItem","path","signUp","signIn","setItem","changeLikeCardStatus","newCard","deleteCard","filter","setUserAvatar","setUserInfo","postNewCard","ReactDOM","render","StrictMode","getElementById"],"mappings":"iPAiGeA,EAHH,I,WA3FV,cAA2C,IAA9BC,EAA6B,EAA7BA,SAAUC,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,QAAU,oBACxCC,KAAKC,UAAYJ,EACjBG,KAAKE,SAAWJ,EAChBE,KAAKG,SAAWJ,EAChBC,KAAKI,eAAiBL,EAAQM,c,kDAIhC,SAAeC,GACb,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,gDAA0BJ,EAAIK,W,yBAIvC,WACE,OAAOC,MAAMZ,KAAKE,SAAU,CAC1BH,QAASC,KAAKG,WAEfU,KAAKb,KAAKc,kB,yBAIb,YAA4B,IAAfC,EAAc,EAAdA,KAAMC,EAAQ,EAARA,MACjB,OAAOJ,MAAMZ,KAAKE,SAAU,CAC5Be,OAAQ,QACRlB,QAASC,KAAKG,SACde,KAAMC,KAAKC,UAAU,CACnBL,KAAMA,EACNC,MAAOA,MAGRH,KAAKb,KAAKc,kB,2BAIb,SAAcO,GACZ,OAAOT,MAAM,GAAD,OAAIZ,KAAKE,SAAT,WAA4B,CACxCe,OAAQ,QACRlB,QAASC,KAAKG,SACde,KAAMC,KAAKC,UAAU,CACnBE,OAAQD,MAGTR,KAAKb,KAAKc,kB,yBAIb,WACE,OAAOF,MAAMZ,KAAKC,UAAW,CAC3BF,QAASC,KAAKG,WAEfU,KAAKb,KAAKc,kB,yBAIb,YAAwC,IAA3BS,EAA0B,EAA1BA,YAAaC,EAAa,EAAbA,WACxB,OAAOZ,MAAMZ,KAAKC,UAAW,CAC3BgB,OAAQ,OACRlB,QAASC,KAAKG,SACde,KAAMC,KAAKC,UAAU,CACnBL,KAAMQ,EACNE,KAAMD,MAGTX,KAAKb,KAAKc,kB,kCAIb,YAAyC,IAAnBY,EAAkB,EAAlBA,QAASC,EAAS,EAATA,OAC7B,OAAOf,MAAM,GAAD,OAAIZ,KAAKC,UAAT,kBAA4B0B,GAAU,CAChDV,OAAO,GAAD,OAAKS,EAAU,SAAW,OAChC3B,QAASC,KAAKG,WAEfU,KAAKb,KAAKc,kB,wBAIb,SAAWa,GACT,OAAOf,MAAM,GAAD,OAAIZ,KAAKC,UAAT,YAAsB0B,GAAU,CAC1CV,OAAQ,SACRlB,QAASC,KAAKG,WAEfU,KAAKb,KAAKc,oB,KAOH,CC9FQ,CAClBjB,SAAU,oDACVC,QAAS,uDACTC,QAAS,CACPM,cAAe,uCACf,eAAgB,sBCqDLuB,EADF,I,WAtDX,WAAYC,GAAU,oBACpB7B,KAAK6B,QAAUA,E,kDAIjB,SAAevB,GACb,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAR,gDAA0BJ,EAAIK,W,oBAIvC,YAA6B,IAApBmB,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SACd,OAAOnB,MAAM,GAAD,OAAIZ,KAAK6B,QAAT,WACV,CACEZ,OAAQ,OACRlB,QAAS,CAAC,eAAgB,oBAC1BmB,KAAMC,KAAKC,UAAU,CAAEW,WAAUD,YAGpCjB,KAAKb,KAAKc,kB,oBAIb,YAA6B,IAApBgB,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SACd,OAAOnB,MAAM,GAAD,OACPZ,KAAK6B,QADE,WAEV,CACEZ,OAAQ,OACRlB,QAAS,CAAC,eAAgB,oBAC1BmB,KAAMC,KAAKC,UAAU,CAACW,WAAUD,YAGnCjB,KAAKb,KAAKc,kB,wBAIb,SAAWkB,GACT,OAAOpB,MAAM,GAAD,OACPZ,KAAK6B,QADE,aAEV,CACEZ,OAAQ,MACRlB,QAAS,CACP,eAAgB,mBAChB,+BAA4BiC,MAIjCnB,KAAKb,KAAKc,oB,KAKF,CD/CF,iCETEmB,EAAqBC,IAAMC,gB,uBCYzBC,MAVf,YAA6D,IAAxBC,EAAuB,EAAlCC,UAAyBC,EAAS,6BAC1D,OACE,cAAC,IAAD,UACG,kBACCA,EAAMC,SAAW,cAACH,EAAD,eAAeE,IAAY,cAAC,IAAD,CAAUE,GAAG,iBCwDlDC,MA7Df,YAAsE,IAA9CC,EAA6C,EAA7CA,MAAOC,EAAsC,EAAtCA,WAAYC,EAA0B,EAA1BA,aAAcC,EAAY,EAAZA,SAEvD,EAAoCC,mBAAS,IAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KACA,EAA0CF,mBAAS,IAAnD,mBAAOG,EAAP,KAAsBC,EAAtB,KAiBA,OACE,yBAASC,UAAU,gBAAnB,SACA,uBACEA,UAAU,0BACVC,SAVJ,SAAsBC,GACpBA,EAAIC,iBACJV,EAAa,CAAEf,MAAOkB,EAAYjB,SAAUmB,KAM5C,UAIE,oBAAIE,UAAU,cAAd,SAA6BT,IAC7B,uBAAOS,UAAU,cAAjB,SACE,uBACEI,KAAK,QACLC,MAAOT,GAAc,GACrBU,SA1BR,SAA0BJ,GACxBL,EAAcK,EAAIK,OAAOF,QA0BnBL,UAAU,qCACVrC,KAAK,QACL6C,YAAY,QACZC,UAAU,IACVC,UAAU,KACVC,aAAa,MACbC,UAAQ,MAGZ,uBAAOZ,UAAU,cAAjB,SACE,uBACEI,KAAK,WACLC,MAAOP,GAAiB,GACxBQ,SApCR,SAA6BJ,GAC3BH,EAAiBG,EAAIK,OAAOF,QAoCtBL,UAAU,qCACVrC,KAAK,WACL6C,YAAY,uCACZC,UAAU,IACVC,UAAU,KACVE,UAAQ,MAGZ,wBAAQR,KAAK,SAASJ,UAAU,qDAAhC,SAAsFR,IACtF,qBAAKQ,UAAU,uBAAf,SAAuCN,UCxC9BmB,MAdf,YAAmC,IAAfC,EAAc,EAAdA,WAClB,OACE,cAAC,EAAD,CACEvB,MAAM,qEACNC,WAAW,+GACXC,aAAcqB,EAHhB,SAKE,cAAC,IAAD,CAAMzB,GAAG,WAAWW,UAAU,aAA9B,oKCESe,MAVf,YAA6B,IAAZC,EAAW,EAAXA,QACf,OACE,cAAC,EAAD,CACEzB,MAAM,2BACNC,WAAW,iCACXC,aAAcuB,KCPL,MAA0B,iCCoC1BC,MAhCf,YAAiD,IAA/B7B,EAA8B,EAA9BA,SAAUV,EAAoB,EAApBA,MAAOwC,EAAa,EAAbA,UAC1BC,EAAYC,cAAZD,SAEP,OACE,yBAAQnB,UAAU,uBAAlB,UACE,qBAAKqB,IAAKC,EAAMC,IAAI,6CAAUvB,UAAU,iBACxC,sBAAKA,UAAU,uBAAf,UACE,mBAAGA,UAAS,6BAAwBZ,EAAW,6BAA+B,IAA9E,SAAqFV,IAEpFU,EAEC,cAAC,IAAD,CAAMC,GAAG,WAAWW,UAAU,mCAAmCwB,QAASN,EAA1E,4CAKa,aAAbC,EAEE,cAAC,IAAD,CAAM9B,GAAG,WAAWW,UAAU,eAA9B,gFAIA,cAAC,IAAD,CAAMX,GAAG,WAAWW,UAAU,eAA9B,mDCyBGyB,MAhDf,YAA8D,IAA/CC,EAA8C,EAA9CA,KAAMC,EAAwC,EAAxCA,YAAaC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,aAEtCC,EAAchD,IAAMiD,WAAWlD,GAG/BmD,EAAQN,EAAKO,MAAMC,MAAQJ,EAAYI,IAGvCC,EAAyB,6BAA0BH,EAAQ,4BAA8B,IAGzF1D,EAAUoD,EAAKU,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OAGrDK,EAAuB,4BAAyBjE,EAAU,2BAA6B,IAe7F,OACE,8BACE,yBAAQ0B,UAAU,OAAlB,UACE,wBAAQA,UAAU,qBAAqBwB,QAhB7C,WACEG,EAAYD,IAeR,SACE,qBAAKL,IAAKK,EAAKrD,KAAMkD,IAAKG,EAAK/D,KAAMqC,UAAU,kBAEjD,6BAAYA,UAAU,gBAAtB,UACE,mBAAGA,UAAU,cAAb,SAA4B0B,EAAK/D,OACjC,sBAAKqC,UAAU,mBAAf,UACE,wBAAQI,KAAK,SAASJ,UAAWuC,EAAyBf,QAlBpE,WACEI,EAAWF,IAiBiFc,aAAW,qDAC/F,mBAAGxC,UAAU,sBAAb,SAAoC0B,EAAKU,MAAMK,eAGnD,wBAAQrC,KAAK,SAASJ,UAAWmC,EAA2BX,QAlBlE,WACEK,EAAaH,IAiB+Ec,aAAW,qDC7C5F,MAA0B,4CC4C1BE,MAvCf,YAAwG,IAAzFC,EAAwF,EAAxFA,aAAcC,EAA0E,EAA1EA,cAAeC,EAA2D,EAA3DA,WAAYC,EAA+C,EAA/CA,MAAOnB,EAAwC,EAAxCA,YAAaC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,aAEhFC,EAAchD,IAAMiD,WAAWlD,GAErC,OACE,uBAAMkE,GAAG,UAAT,UACI,0BAAS/C,UAAU,wBAAwBwC,aAAW,6CAAtD,UACE,sBAAKxC,UAAU,mBAAf,UACE,qBAAKqB,IAAKS,EAAY5D,OAAQqD,IAAI,kFAAiBvB,UAAU,oBAC7D,wBAAQI,KAAK,SAAUJ,UAAU,8BAA8BwB,QAASmB,EAAxE,SACE,qBAAKtB,IAAK2B,EAAgBzB,IAAI,GAAGvB,UAAU,gCAE7C,sBAAKA,UAAU,iBAAf,UACE,oBAAI+C,GAAG,QAAQ/C,UAAU,gBAAzB,SAA0C8B,EAAYnE,OACtD,wBAAQyC,KAAK,SAASJ,UAAU,uBAAuBwC,aAAW,iFAAgBhB,QAASoB,OAE7F,mBAAG5C,UAAU,uBAAb,SAAqC8B,EAAYlE,WAEnD,wBAAQwC,KAAK,SAASJ,UAAU,sBAAsBwC,aAAW,mDAAWhB,QAASqB,OAGvF,yBAAS7C,UAAU,sBAAsBwC,aAAW,iCAApD,SAEGM,EAAMG,KAAI,SAACvB,GAAD,OACT,cAAC,EAAD,CAEEA,KAAMA,EACNC,YAAaA,EACbC,WAAYA,EACZC,aAAcA,GAJTH,EAAKQ,cChBTgB,MAZf,YAAsC,IAAjBxB,EAAgB,EAAhBA,KAAMyB,EAAU,EAAVA,QACzB,OACE,yBAASnD,UAAS,gCAA2B0B,EAAKrD,KAAO,eAAiB,IAAMmE,aAAW,gHAA3F,SACE,yBAAQxC,UAAU,OAAlB,UACE,wBAAQI,KAAK,SAASJ,UAAU,sBAAsBwC,aAAW,4EAAgBhB,QAAS2B,IAC1F,qBAAK9B,IAAKK,EAAKrD,KAAMkD,IAAKG,EAAK/D,KAAMqC,UAAU,gBAC/C,4BAAYA,UAAU,gBAAtB,SAAuC0B,EAAK/D,aCRrC,MAA0B,yCCA1B,MAA0B,sCCwB1ByF,MArBf,YAAyD,IAAnCC,EAAkC,EAAlCA,OAAQC,EAA0B,EAA1BA,eAAgBH,EAAU,EAAVA,QAEtCI,EAAkBD,EACpBE,EACAC,EAEEC,EAAmBJ,EACrB,sMACA,wKAEJ,OACE,yBAAStD,UAAS,gBAAWqD,EAAS,eAAiB,IAAMb,aAAW,gMAAxE,SACE,yBAAQxC,UAAU,sBAAlB,UACE,wBAAQI,KAAK,SAASJ,UAAU,sBAAsBwC,aAAW,4EAAgBhB,QAAS2B,IAC1F,qBAAK9B,IAAKkC,EAAiBhC,IAAKmC,EAAkB1D,UAAU,sBAC5D,4BAAYA,UAAU,cAAtB,SAAqC0D,UCD9BC,MAff,YAAwF,IAAhEhG,EAA+D,EAA/DA,KAAM4B,EAAyD,EAAzDA,MAAOC,EAAkD,EAAlDA,WAAYE,EAAsC,EAAtCA,SAAU2D,EAA4B,EAA5BA,OAAQF,EAAoB,EAApBA,QAASlD,EAAW,EAAXA,SACpE2D,EAAYP,EAAS,eAAiB,GAE5C,OACE,yBAASrD,UAAS,2BAAsBrC,EAAtB,YAA8BiG,GAAhD,SACE,uBAAM5D,UAAU,OAAOrC,KAAMA,EAAMsC,SAAUA,EAAU4D,YAAU,EAAjE,UACE,wBAAQzD,KAAK,SAASJ,UAAU,sBAAsBwC,aAAW,4EAAgBhB,QAAS2B,IAC1F,oBAAInD,UAAU,cAAd,SAA6BT,IAC5BG,EACD,wBAAQU,KAAK,SAASJ,UAAU,sBAAhC,SAAuDR,UC2DhDsE,MAlEf,YAA4D,IAAjCT,EAAgC,EAAhCA,OAAQF,EAAwB,EAAxBA,QAASY,EAAe,EAAfA,aAE1C,EAAwBjF,IAAMa,SAAS,IAAvC,mBAAOhC,EAAP,KAAaqG,EAAb,KACA,EAAsClF,IAAMa,SAAS,IAArD,mBAAOsE,EAAP,KAAoBC,EAApB,KAEMpC,EAAchD,IAAMiD,WAAWlD,GA0BrC,OAzBAC,IAAMqF,WAAU,WACdH,EAAQlC,EAAYnE,MACpBuG,EAAepC,EAAYlE,SAC1B,CAACkE,IAuBF,eAAC,EAAD,CACAnE,KAAK,eACL4B,MAAM,4HACNC,WAAW,yDACX6D,OAAQA,EACRF,QAASA,EACTlD,SAlBF,SAAsBmE,GAEpBA,EAAEjE,iBAGF4D,EAAa,CACXpG,OACAC,MAAOqG,KAKT,UAQE,wBAAOjE,UAAU,cAAjB,UACE,uBACEI,KAAK,OACLC,MAAO1C,GAAQ,GACf2C,SAhCR,SAA0B8D,GACxBJ,EAAQI,EAAE7D,OAAOF,QAgCXL,UAAU,cACVQ,YAAY,qBACZI,UAAQ,IAEV,sBAAMZ,UAAU,8CAElB,wBAAOA,UAAU,cAAjB,UACE,uBACEI,KAAK,OACLC,MAAO4D,GAAe,GACtB3D,SAvCR,SAAiC8D,GAC/BF,EAAeE,EAAE7D,OAAOF,QAuClBL,UAAU,cACVQ,YAAY,kCACZI,UAAQ,IAEV,sBAAMZ,UAAU,qDC3BTqE,MAlCf,YAA6D,IAAnChB,EAAkC,EAAlCA,OAAQF,EAA0B,EAA1BA,QAASmB,EAAiB,EAAjBA,eAEnCC,EAAWzF,IAAM0F,OAAO,MAO9B,OACE,cAAC,EAAD,CACE7G,KAAK,cACL4B,MAAM,wFACNC,WAAW,yDACX6D,OAAQA,EACRF,QAASA,EACTlD,SAZJ,SAAsBmE,GACpBA,EAAEjE,iBACFmE,EAAeC,EAASE,QAAQpE,QAIhC,SAQE,wBAAOL,UAAU,cAAjB,UACA,uBACEI,KAAK,MACLsE,IAAKH,EACLxB,GAAG,eACH/C,UAAU,8BACVrC,KAAK,MACL6C,YAAY,6JACZI,UAAQ,IAET,sBAAMZ,UAAU,+CC8BR2E,MA1Df,YAAuD,IAA/BtB,EAA8B,EAA9BA,OAAQF,EAAsB,EAAtBA,QAASN,EAAa,EAAbA,WAEvC,EAAsC/D,IAAMa,SAAS,IAArD,mBAAOxB,EAAP,KAAoByG,EAApB,KACA,EAAoC9F,IAAMa,SAAS,IAAnD,mBAAOvB,EAAP,KAAmByG,EAAnB,KAeA,OACE,eAAC,EAAD,CACElH,KAAK,WACL4B,MAAM,gEACNC,WAAW,6CACX6D,OAAQA,EACRF,QAASA,EACTlD,SApBJ,SAAsBmE,GACpBA,EAAEjE,iBACF0C,EAAW,CAAC1E,cAAaC,gBAYzB,UAOE,wBAAO4B,UAAU,cAAjB,UACE,uBACEI,KAAK,OACLC,MAAOlC,EACPmC,SApBR,SAA2B8D,GACzBQ,EAAeR,EAAE7D,OAAOF,QAoBlB0C,GAAG,cACH/C,UAAU,cACVrC,KAAK,WACL6C,YAAY,mDACZC,UAAU,IACVC,UAAU,KACVE,UAAQ,IAEZ,sBAAMZ,UAAU,2CAEhB,wBAAOA,UAAU,cAAjB,UACE,uBACEI,KAAK,MACLC,MAAOjC,EACPkC,SA/BR,SAA0B8D,GACxBS,EAAcT,EAAE7D,OAAOF,QA+BjB0C,GAAG,YACH/C,UAAU,8BACVrC,KAAK,MACL6C,YAAY,qGACZI,UAAQ,IAEV,sBAAMZ,UAAU,6CC7CT8E,MARf,WACE,OACE,wBAAQ9E,UAAU,uBAAlB,SACA,oBAAGA,UAAU,kBAAb,mBAAuC,IAAI+E,MAAOC,cAAlD,sBCqRWC,MAtQf,WAEE,MAAgCtF,oBAAS,GAAzC,mBAAOP,EAAP,KAAiB8F,EAAjB,KACA,EAA0BvF,mBAAS,IAAnC,mBAAOjB,EAAP,KAAcyG,EAAd,KACA,EAA0DxF,oBAAS,GAAnE,mBAAOyF,EAAP,KAA8BC,EAA9B,KACA,EAA4D1F,oBAAS,GAArE,mBAAO2F,EAAP,KAA+BC,EAA/B,KACA,EAAsD5F,oBAAS,GAA/D,mBAAO6F,EAAP,KAA4BC,EAA5B,KACA,EAAkD9F,oBAAS,GAA3D,mBAAO+F,EAAP,KAA0BC,EAA1B,KACA,EAA4ChG,oBAAS,GAArD,mBAAO2D,EAAP,KAAuBsC,EAAvB,KACA,EAAwCjG,mBAAS,IAAjD,mBAAOkG,EAAP,KAAqBC,EAArB,KACA,EAAsCnG,mBAAS,IAA/C,mBAAOmC,EAAP,KAAoBiE,GAApB,KACA,GAA0BpG,mBAAS,IAAnC,qBAAOmD,GAAP,MAAckD,GAAd,MACMC,GAAUC,cAuEhB,SAASC,KACPd,GAAyB,GACzBE,GAA0B,GAC1BE,GAAuB,GACvBE,GAAqB,GACrBG,EAAgB,IA0GlB,OAlLA3B,qBAAU,WACR,IAAMiC,EAAeC,aAAaC,QAAQ,SACtCF,GACF5H,EAAK+H,WAAWH,GACf3I,MAAK,SAACP,GACLiI,EAASjI,EAAIsJ,KAAK9H,OAClBwG,GAAY,GACZe,GAAQQ,KAAK,QAEdC,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAkElBxC,qBAAU,WACR3H,EAAIsK,cACHrJ,MAAK,SAACP,GACL6I,GAAe7I,MAEhBwJ,OAAM,SAACC,GACLC,QAAQC,IAAIF,QAGd,IAGHxC,qBAAU,WACR3H,EAAIuK,cACHtJ,MAAK,SAACP,GACL8I,GAAS9I,MAEVwJ,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAGb,IAgEHxC,qBAAU,WAER,SAAS6C,EAAe9G,GACP,WAAXA,EAAI+G,KACNd,KAOJ,OAHAe,SAASC,iBAAiB,QAASH,GAG5B,WACLE,SAASE,oBAAoB,QAASJ,MAGxC,IAGA,qBAAKhH,UAAU,OAAf,SACE,eAACnB,EAAmBwI,SAApB,CAA6BhH,MAAOyB,EAApC,UACE,cAAC,EAAD,CACE1C,SAAUA,EACVV,MAAOA,EACPwC,UA5IR,WACEgE,GAAY,GACZC,EAAS,IACTkB,aAAaiB,WAAW,SACxBV,QAAQC,IAAIR,aAAaC,QAAQ,aA2I7B,eAAC,IAAD,WACE,cAAC,IAAD,CAAOiB,KAAK,WAAZ,SACE,cAAC,EAAD,CACEzG,WA/KZ,YAA4C,IAApBpC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SAC7BH,EAAKgJ,OAAO,CAAE9I,QAAOC,aAClBlB,MAAK,SAACP,GACDA,EAAIsJ,OACNZ,GAAkB,GAClBD,GAAqB,GACrBM,GAAQQ,KAAK,gBAGhBC,OAAM,SAACC,GACNf,EAAkBe,GAClBhB,GAAqB,GACrBiB,QAAQC,IAAIF,WAuKV,cAAC,IAAD,CAAOY,KAAK,WAAZ,SACE,cAAC,EAAD,CACEvG,QArKZ,YAA4C,IAApBtC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SAC7BH,EAAKiJ,OAAO,CAAE/I,QAAOC,aAClBlB,MAAK,SAACP,GACDA,IACFgI,GAAY,GACZC,EAASzG,GACT2H,aAAaqB,QAAQ,QAASxK,EAAI0B,OAClCqH,GAAQQ,KAAK,SAGhBC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,WA+JxB,cAAC,EAAD,CACEY,KAAK,IACLnI,SAAUA,EACVF,UAAWwD,EACXC,aAzJV,WACE0C,GAAyB,IAyJjBzC,cAtJV,WACE2C,GAA0B,IAsJlB1C,WAnJV,WACE4C,GAAuB,IAmJf9D,YAhJV,SAAyBD,GACvBoE,EAAgBpE,IAgJRE,WA1EV,SAAwBF,GAEvB,IAAMpD,EAAUoD,EAAKU,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OAE3D1F,EAAImL,qBAAqB,CAACrJ,UAASC,OAAQmD,EAAKQ,MAC9CzE,MAAK,SAACmK,GAEN5B,IAAS,SAAClD,GAAD,OAAWA,EAAMG,KAAI,SAACX,GAAD,OAAOA,EAAEJ,MAAQR,EAAKQ,IAAM0F,EAAUtF,WAEpEoE,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAiEN9E,aA5DV,SAA0BH,GACxBlF,EAAIqL,WAAWnG,EAAKQ,KACnBzE,MAAK,WACJuI,GAASlD,GAAMgF,QAAO,SAACxF,GAAD,OAAOA,EAAEJ,MAAQR,EAAKQ,WAE7CwE,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAuDN7D,MAASA,QAIb,cAAC,EAAD,IAEA,cAAC,EAAD,CACEO,OAAQ+B,EACRjC,QAASgD,GACT7B,eA5GR,SAA4BrG,GAC1BzB,EAAIuL,cAAc9J,GACjBR,MAAK,SAACP,GACL6I,GAAe7I,GACfiJ,QAEDO,OAAM,SAACC,GACLC,QAAQC,IAAIF,SAuGX,cAAC,EAAD,CACEtD,OAAQiC,EACRnC,QAASgD,GACTpC,aA5HR,YAA0C,IAAfpG,EAAc,EAAdA,KAAMC,EAAQ,EAARA,MAC/BpB,EAAIwL,YAAY,CAACrK,OAAMC,UACtBH,MAAK,SAACP,GACL6I,GAAe7I,GACfiJ,QAEDO,OAAM,SAACC,GACLC,QAAQC,IAAIF,SAuHX,cAAC,EAAD,CACEtD,OAAQmC,EACRrC,QAASgD,GACTtD,WA3GR,YAA0D,IAA3B1E,EAA0B,EAA1BA,YAAaC,EAAa,EAAbA,WAC1C5B,EAAIyL,YAAY,CAAC9J,cAAaC,eAC7BX,MAAK,SAACmK,GACL5B,GAAS,CAAC4B,GAAF,mBAAc9E,MACtBqD,QAEDO,OAAM,SAACC,GACLC,QAAQC,IAAIF,SAsGX,cAAC,EAAD,CACEjF,KAAMmE,EACN1C,QAASgD,KAEX,cAAC,EAAD,CACE9C,OAAQqC,EACRpC,eAAgBA,EAChBH,QAASgD,WC3QnB+B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJlB,SAASmB,eAAe,W","file":"static/js/main.101d259f.chunk.js","sourcesContent":["import { apiSettings } from \"./utils\";\n\nclass Api {\n  constructor({cardsUrl, userUrl, headers}) {\n    this._cardsUrl = cardsUrl;\n    this._userUrl = userUrl;\n    this._headers = headers;\n    this._authorization = headers.authorization;\n  }\n\n  // Проверка ответа сервера\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  // Получение информации о пользователе с сервера\n  getUserInfo() {\n    return fetch(this._userUrl, {\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n  // Загрузка новой информации о пользователе на сервер\n  setUserInfo({name, about}) {\n    return fetch(this._userUrl, {\n    method: 'PATCH',\n    headers: this._headers,\n    body: JSON.stringify({\n      name: name,\n      about: about\n      })\n    })\n    .then(this._checkResponse)\n  }\n\n  // Загрузка аватара пользователя на сервер\n  setUserAvatar(newAvatarUrl) {\n    return fetch(`${this._userUrl}/avatar`, {\n    method: 'PATCH',\n    headers: this._headers,\n    body: JSON.stringify({\n      avatar: newAvatarUrl,\n      })\n    })\n    .then(this._checkResponse)\n  }\n\n  // Получение массива карточек с сервера\n  getCardList() {\n    return fetch(this._cardsUrl, {\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n  // Загрузка новой карточки на сервер\n  postNewCard({newCardName, newCardUrl}) {\n    return fetch(this._cardsUrl, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: newCardName,\n        link: newCardUrl\n        })\n    })\n    .then(this._checkResponse)\n  }\n\n  // Лайк и удаление лайка карточки\n  changeLikeCardStatus({isLiked, cardId}) {\n    return fetch(`${this._cardsUrl}/likes/${cardId}`, {\n      method: `${isLiked ? 'DELETE' : 'PUT'}`,\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n  // Удаление карточки на сервере\n  deleteCard(cardId) {\n    return fetch(`${this._cardsUrl}/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(this._checkResponse)\n  }\n\n}\n\n\n// Создаем экземпляр класса взаимодействия с API сервера\nconst api = new Api(apiSettings);\n\n\nexport default api;\n","const apiSettings = {\n  cardsUrl: 'https://mesto.nomoreparties.co/v1/cohort-22/cards',\n  userUrl: 'https://mesto.nomoreparties.co/v1/cohort-22/users/me',\n  headers: {\n    authorization: '515ca80d-3822-4c04-8086-34127dceee10',\n    'Content-Type': 'application/json'\n  }\n};\n\nconst authSettings = {\n  baseUrl: 'https://auth.nomoreparties.co' \n};\n\nexport {apiSettings, authSettings};","import { authSettings } from \"./utils\";\n\nclass Auth {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl;\n  }\n\n  // Проверка ответа сервера\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  // Регистрация\n  signUp({ email, password }) {\n    return fetch(`${this.baseUrl}/signup`,\n      {\n        method: 'POST',\n        headers: {\"Content-Type\": \"application/json\"},\n        body: JSON.stringify({ password, email })\n      }\n    )\n    .then(this._checkResponse);\n  }\n\n  // Авторизация\n  signIn({ email, password }) {\n    return fetch(\n      `${this.baseUrl}/signin`, \n      {\n        method: 'POST',\n        headers: {\"Content-Type\": \"application/json\"},\n        body: JSON.stringify({password, email})\n      }\n    )\n    .then(this._checkResponse);\n  }\n\n  // Проверка токена\n  tokenCheck(token) {\n    return fetch(\n      `${this.baseUrl}/users/me`, \n      {\n        method: 'GET',\n        headers: { \n          \"Content-Type\": \"application/json\",\n          \"Authorization\" : `Bearer ${token}`\n        }\n      }\n    )\n    .then(this._checkResponse);\n  }\n\n}\n\nconst auth = new Auth(authSettings.baseUrl);\nexport default auth;","import React from 'react';\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nfunction ProtectedRoute({ component: Component, ...props }) {\n  return(\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\n      }\n    </Route>\n  );\n}\n\nexport default ProtectedRoute;","import { useState } from \"react\";\n\nfunction IdentityForm({ title, buttonText, onFormSubmit, children }) {\n\n  const [emailInput, setEmailInput] = useState('');\n  const [passwordInput, setPasswordInput] = useState('');\n\n  function handleEmailInput(evt) {\n    setEmailInput(evt.target.value);\n  };\n\n  function handlePasswordInput(evt) {\n    setPasswordInput(evt.target.value);\n  };\n\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onFormSubmit({ email: emailInput, password: passwordInput });\n  };\n\n\n  return(\n    <section className=\"page__section\">\n    <form \n      className=\"form form_type_identity\" \n      onSubmit={handleSubmit}\n    >\n      <h2 className=\"form__title\">{title}</h2>\n      <label className=\"form__field\">\n        <input\n          type=\"email\"\n          value={emailInput || ''}\n          onChange={handleEmailInput}\n          className=\"form__input form__input_dark-theme\"\n          name=\"email\"\n          placeholder=\"Email\"\n          minLength=\"5\"\n          maxLength=\"30\"\n          autoComplete=\"off\"\n          required\n        />\n      </label>\n      <label className=\"form__field\">\n        <input\n          type=\"password\"\n          value={passwordInput || ''}\n          onChange={handlePasswordInput}\n          className=\"form__input form__input_dark-theme\"\n          name=\"password\"\n          placeholder=\"Пароль\"\n          minLength=\"6\"\n          maxLength=\"30\"\n          required\n        />\n      </label>\n      <button type=\"submit\" className=\"form__submit-button form__submit-button_dark-theme\">{buttonText}</button>\n      <div className=\"form__link-container\">{children}</div>\n    </form>\n    </section>\n  );\n}\n\nexport default IdentityForm;","import { Link } from \"react-router-dom\";\nimport IdentityForm from \"./IdentityForm\";\n\nfunction Register({ onRegister }) {\n  return(\n    <IdentityForm \n      title=\"Регистрация\"\n      buttonText=\"Зарегистрироваться\"\n      onFormSubmit={onRegister}\n    >\n      <Link to=\"/sign-in\" className=\"form__link\">\n        Уже зарегистрированы? Войти\n      </Link>\n    </IdentityForm>\n  );\n}\n\nexport default Register;","import IdentityForm from \"./IdentityForm\";\n\nfunction Login({ onLogin }) {\n  return(\n    <IdentityForm \n      title=\"Вход\"\n      buttonText=\"Войти\"\n      onFormSubmit={onLogin}\n    />\n  );\n}\n\nexport default Login;","export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport logo from '../images/logo.svg';\n\nfunction Header({ loggedIn, email, onSignOut }) {\n  const {pathname} = useLocation();\n\n  return (\n    <header className=\"header page__section\">\n      <img src={logo} alt=\"Логотип\" className=\"header__logo\"/>\n      <div className=\"header__auth-section\">\n        <p className={`header__user-email ${loggedIn ? 'header__user-email_visible' : ''}`}>{email}</p>\n\n        {loggedIn \n        ? (\n          <Link to=\"/sign-in\" className=\"header__link header__link_logout\" onClick={onSignOut}>\n            Выйти\n          </Link>\n        )\n        : (\n          pathname === \"/sign-in\" \n          ?\n            <Link to=\"/sign-up\" className=\"header__link\">\n              Регистрация\n            </Link>\n          :\n            <Link to=\"/sign-in\" className=\"header__link\">\n              Войти\n            </Link>\n        )}\n\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = card.owner._id === currentUser._id;\n\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\n  const cardDeleteButtonClassName = (`card__trash-button ${isOwn ? 'card__trash-button_active' : ''}`);\n\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = (`card__like-button ${isLiked ? 'card__like-button_active' : ''}`);;\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n\n  return (\n    <div>\n      <figure className=\"card\">\n        <button className=\"card__image-button\" onClick={handleClick}>\n          <img src={card.link} alt={card.name} className=\"card__image\"/>\n        </button>\n        <figcaption className=\"card__caption\">\n          <p className=\"card__title\">{card.name}</p>\n          <div className=\"card__like-block\">\n            <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick} aria-label=\"Нравится\"></button>\n            <p className=\"card__likes-counter\">{card.likes.length}</p>\n          </div>\n        </figcaption>\n        <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick} aria-label=\"Удалить\"></button>\n      </figure>\n    </div>\n  )\n}\n\nexport default Card;\n","export default __webpack_public_path__ + \"static/media/edit-button_big.a086f758.svg\";","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport Card from './Card';\nimport avatarEditIcon from '../images/edit-button_big.svg';\n\nfunction Main({onEditAvatar, onEditProfile, onAddPlace, cards, onCardClick, onCardLike, onCardDelete}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main id=\"content\">\n        <section className=\"profile page__section\" aria-label=\"Профиль\">\n          <div className=\"profile__content\">\n            <img src={currentUser.avatar} alt=\"Аватар профиля\" className=\"profile__avatar\"/>\n            <button type=\"button\"  className=\"profile__avatar-edit-button\" onClick={onEditAvatar}>\n              <img src={avatarEditIcon} alt=\"\" className=\"profile__avatar-edit-icon\"/>\n            </button>\n            <div className=\"profile__title\">\n              <h1 id=\"no_id\" className=\"profile__name\">{currentUser.name}</h1>\n              <button type=\"button\" className=\"profile__edit-button\" aria-label=\"Редактировать\" onClick={onEditProfile}></button>\n            </div>\n            <p className=\"profile__description\">{currentUser.about}</p>\n          </div>\n          <button type=\"button\" className=\"profile__add-button\" aria-label=\"Добавить\" onClick={onAddPlace}></button>\n        </section>\n\n        <section className=\"cards page__section\" aria-label=\"Места\">\n\n          {cards.map((card) => (\n            <Card\n              key={card._id}\n              card={card}\n              onCardClick={onCardClick}\n              onCardLike={onCardLike}\n              onCardDelete={onCardDelete}\n            />\n            )\n          )}\n\n        </section>\n      </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction ImagePopup({card, onClose}) {\n  return (\n    <section className={`popup popup_type_zoom ${card.link ? \"popup_opened\" : \"\"}`} aria-label=\"Просмотр фотографий\">\n      <figure className=\"zoom\">\n        <button type=\"button\" className=\"popup__close-button\" aria-label=\"Закрыть попап\" onClick={onClose}></button>\n        <img src={card.link} alt={card.name} className=\"zoom__image\"/>\n        <figcaption className=\"zoom__caption\">{card.name}</figcaption>\n      </figure>\n    </section>\n  );\n}\n\nexport default ImagePopup;\n","export default __webpack_public_path__ + \"static/media/success-icon.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail-icon.df8eddf6.svg\";","import successIcon from '../images/success-icon.svg';\nimport failIcon from '../images/fail-icon.svg';\n\nfunction InfoTooltip({isOpen, regStatusError, onClose}) {\n\n  const InfoTooltipIcon = regStatusError \n    ? failIcon \n    : successIcon;\n\n  const InfoTooltipTitle = regStatusError \n    ? 'Что-то пошло не так! Попробуйте ещё раз.' \n    : 'Вы успешно зарегистрировались!';\n  \n  return(\n    <section className={`popup ${isOpen ? \"popup_opened\" : \"\"}`} aria-label=\"Сообщение о результате регистрации\">\n      <figure className=\"form form_type_info\">\n        <button type=\"button\" className=\"popup__close-button\" aria-label=\"Закрыть попап\" onClick={onClose}></button>\n        <img src={InfoTooltipIcon} alt={InfoTooltipTitle} className=\"popup__info-image\"/>\n        <figcaption className=\"form__title\">{InfoTooltipTitle}</figcaption>\n      </figure>\n    </section>\n  );\n}\n\nexport default InfoTooltip;","import React from 'react';\n\nfunction PopupWithForm({name, title, buttonText, children, isOpen, onClose, onSubmit}) {\n  const checkOpen = isOpen ? \"popup_opened\" : \"\";\n\n  return (\n    <section className={`popup popup_type_${name} ${checkOpen}`}>\n      <form className=\"form\" name={name} onSubmit={onSubmit} noValidate>\n        <button type=\"button\" className=\"popup__close-button\" aria-label=\"Закрыть попап\" onClick={onClose}></button>\n        <h2 className=\"form__title\">{title}</h2>\n        {children}\n        <button type=\"submit\" className=\"form__submit-button\">{buttonText}</button>\n      </form>\n    </section>\n  )\n}\n\nexport default PopupWithForm;\n\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  const currentUser = React.useContext(CurrentUserContext);\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return(\n    <PopupWithForm\n    name=\"profile-edit\"\n    title=\"Редактировать профиль\"\n    buttonText=\"Сохранить\"\n    isOpen={isOpen}\n    onClose={onClose}\n    onSubmit={handleSubmit}\n    >\n      <label className=\"form__field\">\n        <input\n          type=\"text\"\n          value={name || ''}\n          onChange={handleNameChange}\n          className=\"form__input\"\n          placeholder=\"Имя\"\n          required\n        />\n        <span className=\"form__input-error username-input-error\"></span>\n      </label>\n      <label className=\"form__field\">\n        <input\n          type=\"text\"\n          value={description || ''}\n          onChange={handleDescriptionChange}\n          className=\"form__input\"\n          placeholder=\"О себе\"\n          required\n        />\n        <span className=\"form__input-error description-input-error\"></span>\n      </label>\n  </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\n\n  const inputRef = React.useRef(null);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar(inputRef.current.value);\n  }\n\n  return(\n    <PopupWithForm\n      name=\"avatar-edit\"\n      title=\"Обновить аватар\"\n      buttonText=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <label className=\"form__field\">\n      <input\n        type=\"url\"\n        ref={inputRef}\n        id=\"avatar-input\"\n        className=\"form__input form__input-url\"\n        name=\"url\"\n        placeholder=\"Ссылка на картинку с аватаром\"\n        required\n        />\n       <span className=\"form__input-error avatar-input-error\"></span>\n      </label>\n  </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\n\n  const [newCardName, setNewCardName] = React.useState('');\n  const [newCardUrl, setNewCardUrl] = React.useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace({newCardName, newCardUrl});\n  }\n\n  function handleCardNameAdd(e) {\n    setNewCardName(e.target.value);\n  }\n\n  function handleCardUrlAdd(e) {\n    setNewCardUrl(e.target.value);\n  }\n\n  return(\n    <PopupWithForm\n      name=\"card-add\"\n      title=\"Новое место\"\n      buttonText=\"Создать\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}>\n      <label className=\"form__field\">\n        <input\n          type=\"text\"\n          value={newCardName}\n          onChange={handleCardNameAdd}\n          id=\"title-input\"\n          className=\"form__input\"\n          name=\"cardname\"\n          placeholder=\"Название\"\n          minLength=\"1\"\n          maxLength=\"30\"\n          required\n        />\n      <span className=\"form__input-error title-input-error\"></span>\n      </label>\n      <label className=\"form__field\">\n        <input\n          type=\"url\"\n          value={newCardUrl}\n          onChange={handleCardUrlAdd}\n          id=\"url-input\"\n          className=\"form__input form__input-url\"\n          name=\"url\"\n          placeholder=\"Ссылка на картинку\"\n          required\n        />\n        <span className=\"form__input-error url-input-error\"></span>\n      </label>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer page__section\">\n    <p className=\"footer__content\">&copy; {new Date().getFullYear()} Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport { useState, useEffect } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\n\nimport '../index.css';\nimport api from '../utils/api';\nimport auth from '../utils/auth';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport ProtectedRoute from './ProtectedRoute';\nimport Register from './Register';\nimport Login from './Login';\nimport Header from './Header';\nimport Main from './Main';\nimport ImagePopup from './ImagePopup';\nimport InfoTooltip from './InfoTooltip';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport Footer from './Footer';\n\nfunction App() {\n  \n  const [loggedIn, setLoggedIn] = useState(false);\n  const [email, setEmail] = useState('');\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n  const [regStatusError, setRegStatusError] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const history = useHistory();\n\n\n  // Если в локальном хранилище есть токен, то проверяем его валидность на сервере и авторизуем пользователя\n  useEffect(() => {\n    const currentToken = localStorage.getItem('token');\n    if (currentToken) {\n      auth.tokenCheck(currentToken)\n      .then((res) => {\n        setEmail(res.data.email);\n        setLoggedIn(true);\n        history.push('/');\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n    }\n  })\n\n  function handleSignUp({ email, password }) {\n    auth.signUp({ email, password })\n      .then((res) => {\n        if (res.data) {\n          setRegStatusError(false);\n          setIsInfoTooltipOpen(true);\n          history.push('/sign-in');\n        }\n      })\n      .catch((err) => {\n        setRegStatusError(err);\n        setIsInfoTooltipOpen(true);\n        console.log(err);\n      })\n  }\n\n  function handleSignIn({ email, password }) {\n    auth.signIn({ email, password }) // user@test.com, 123456\n      .then((res) => {\n        if (res) {\n          setLoggedIn(true);\n          setEmail(email);\n          localStorage.setItem('token', res.token);\n          history.push('/');\n        }\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    setEmail('');\n    localStorage.removeItem('token');\n    console.log(localStorage.getItem('token'));\n  }\n\n  function handleEditAvatarClick(){\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick(){\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick(){\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card){\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard({});\n  }\n\n  // Загружаем данные пользователя с сервера\n  useEffect(() => {\n    api.getUserInfo()\n    .then((res) => {\n      setCurrentUser(res);\n      })\n    .catch((err) => {\n       console.log(err);\n      });\n\n  }, []);\n\n  // Загружаем карточки с сервера\n  useEffect(() => {\n    api.getCardList()\n    .then((res) => {\n      setCards(res);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n\n  }, []);\n\n\n  function handleUpdateUser({name, about}) {\n    api.setUserInfo({name, about})\n    .then((res) => {\n      setCurrentUser(res);\n      closeAllPopups();\n      })\n    .catch((err) => {\n       console.log(err);\n      })\n  }\n\n  function handleUpdateAvatar(newAvatarUrl) {\n    api.setUserAvatar(newAvatarUrl)\n    .then((res) => {\n      setCurrentUser(res);\n      closeAllPopups();\n      })\n    .catch((err) => {\n       console.log(err);\n      })\n  }\n\n  function handleAddPlaceSubmit({newCardName, newCardUrl}) {\n    api.postNewCard({newCardName, newCardUrl})\n    .then((newCard) => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n      })\n    .catch((err) => {\n       console.log(err);\n      })\n  }\n\n  // Обработка лайков\n  function handleCardLike(card) {\n\t  // Проверяем, есть ли уже лайк на этой карточке\n\t  const isLiked = card.likes.some(i => i._id === currentUser._id);\n\t  // Отправляем запрос в API и получаем обновлённые данные карточки\n\t  api.changeLikeCardStatus({isLiked, cardId: card._id})\n    .then((newCard) => {\n\t\t  // Формируем новый массив на основе имеющегося, подставляя в него новую карточку и обновляем стейт\n\t    setCards((cards) => cards.map((i) => i._id === card._id ? newCard : i));\n\t  })\n    .catch((err) => {\n      console.log(err);\n     })\n  }\n\n  // Удаление карточки\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n    .then(() => {\n      setCards(cards.filter((i) => i._id !== card._id));\n    })\n    .catch((err) => {\n      console.log(err);\n     })\n  }\n\n\n  // Реализуем закрытие popup кнопкой Esc\n  useEffect(() => {\n\n    function handleEscClose(evt) {\n      if (evt.key ==='Escape') {\n        closeAllPopups();\n      }\n    }\n    // Список действий внутри одного хука\n    document.addEventListener('keyup', handleEscClose);\n\n    // Возвращаем функцию, которая удаляет эффекты\n    return () => {\n      document.removeEventListener('keyup', handleEscClose);\n    }\n\n  },[]);\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header \n          loggedIn={loggedIn}\n          email={email}\n          onSignOut={handleSignOut}\n        />\n\n        <Switch>\n          <Route path=\"/sign-up\">\n            <Register \n              onRegister={handleSignUp}\n            />\n          </Route>\n\n          <Route path=\"/sign-in\">\n            <Login \n              onLogin={handleSignIn}\n            />\n          </Route>\n\n          <ProtectedRoute\n            path=\"/\"\n            loggedIn={loggedIn}\n            component={Main}\n            onEditAvatar = {handleEditAvatarClick}\n            onEditProfile = {handleEditProfileClick}\n            onAddPlace = {handleAddPlaceClick}\n            onCardClick = {handleCardClick}\n            onCardLike = {handleCardLike}\n            onCardDelete = {handleCardDelete}\n            cards = {cards}\n          />\n        </Switch>\n\n        <Footer />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}/>\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}/>\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}/>\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}/>\n\n        <InfoTooltip \n          isOpen={isInfoTooltipOpen}\n          regStatusError={regStatusError}\n          onClose={closeAllPopups}\n        />\n\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}